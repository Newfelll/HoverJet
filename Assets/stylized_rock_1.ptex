{"name":"@@335","type":"graph","parameters":{},"node_position":{"x":0,"y":0},"seed_int":0,"label":"Graph","shortdesc":"","longdesc":"","nodes":[{"name":"Material","type":"material","parameters":{"albedo_color":{"type":"Color","r":1,"g":1,"b":1,"a":1},"metallic":0,"roughness":1,"emission_energy":1,"normal":0.5,"ao":1,"depth_scale":0.5,"flags_transparent":true,"sss":1,"size":11},"node_position":{"x":1653.360107,"y":156.403214},"seed_int":0,"export_paths":{}},{"name":"graph","type":"graph","parameters":{"param0":0.5,"param1":0.5,"param2":0.01,"param3":0.2},"node_position":{"x":16.154417,"y":179.091812},"seed_int":0,"label":"Outputs","shortdesc":"","longdesc":"","nodes":[{"name":"smooth_curvature","type":"graph","parameters":{"param0":10,"param2":0.5},"node_position":{"x":-512.31427,"y":131.104691},"seed_int":0,"label":"Smooth Curvature","shortdesc":"Smooth Curvature","longdesc":"Creates a smooth curvature map from a height map","nodes":[{"name":"normal_map","type":"normal_map","parameters":{"param2":0,"param0":10,"param1":0.5,"param4":1},"node_position":{"x":-684.409058,"y":680},"seed":-9340},{"name":"blend","type":"blend","parameters":{"blend_type":4,"amount":1},"node_position":{"x":510.361206,"y":903.779297},"seed":64581},{"name":"blend_2","type":"blend","parameters":{"blend_type":4,"amount":1},"node_position":{"x":510.179382,"y":803.915527},"seed":64737},{"name":"blend_3","type":"blend","parameters":{"blend_type":4,"amount":1},"node_position":{"x":509.270233,"y":702.279175},"seed":57885},{"name":"blend_4","type":"blend","parameters":{"blend_type":4,"amount":1},"node_position":{"x":509.542999,"y":600.279175},"seed":58107},{"name":"invert","type":"invert","parameters":{},"node_position":{"x":754.354553,"y":603.172791},"seed":43797},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-1097.162842,"y":678.835876},"seed":-22897,"ports":[{"group_size":0,"longdesc":"The input height map","name":"port0","shortdesc":"Height map","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":908.046326,"y":596.806824},"seed":25504,"ports":[{"group_size":0,"longdesc":"The generated curvature map","name":"port0","shortdesc":"Output","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":10,"param2":0.5},"node_position":{"x":-121.992188,"y":350.266235},"seed":-46329,"widgets":[{"label":"Size","linked_widgets":[{"node":"normal_map","widget":"param0"},{"node":"598_3","widget":"size"},{"node":"fast_blur","widget":"param0"},{"node":"598_2","widget":"size"},{"node":"fast_blur_2","widget":"param0"},{"node":"598_4","widget":"size"},{"node":"fast_blur_3","widget":"param0"},{"node":"fast_blur_4","widget":"param0"},{"node":"598_5","widget":"size"},{"node":"fast_blur_5","widget":"param0"},{"node":"598_6","widget":"size"},{"node":"buffer_2","widget":"size"}],"longdesc":"The buffer size for the filter","name":"param0","shortdesc":"Size","type":"linked_control"},{"label":"Intensity","linked_widgets":[{"node":"normal_map","widget":"param1"}],"longdesc":"The contrast of the generated highlights","name":"param2","shortdesc":"Intensity","type":"linked_control"}]},{"name":"598_3","type":"shader","parameters":{"size":10,"amount":1,"width":1},"node_position":{"x":-94.135475,"y":510.526459},"seed":-27808,"shader_model":{"code":"vec2 $(name_uv)_emboss = $(name)_fct($uv);","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec2 $(name)_fct(vec2 uv) {\n\tfloat pixels = max(1.0, $width);\n\tfloat e = 1.0/$size;\n\tvec2 rv = vec2(0.0);\n\tfor (float dx = -pixels; dx <= pixels; dx += 1.0) {\n\t\tfor (float dy = -pixels; dy <= pixels; dy += 1.0) {\n\t\t\tif (abs(dx) > 0.5 || abs(dy) > 0.5) {\n\t\t\t\trv += $in(uv+e*vec2(dx, dy)).xy*cos(vec2(atan(dy, dx))-vec2(0.0, 0.5)*3.14159265359)/length(vec2(dx, dy));\n\t\t\t}\n\t\t}\n\t}\n\treturn $amount*rv/pixels+0.5;\n}","name":"Curvature","outputs":[{"f":"0.5*($(name_uv)_emboss.x+$(name_uv)_emboss.y)","type":"f"}],"parameters":[{"default":9,"first":6,"label":"Size","last":12,"name":"size","type":"size"},{"control":"None","default":1,"label":"Amount","max":10,"min":0,"name":"amount","step":0.1,"type":"float"},{"control":"None","default":1,"label":"Width","max":5,"min":1,"name":"width","step":1,"type":"float"}]}},{"name":"598_2","type":"shader","parameters":{"size":10,"amount":1,"width":2},"node_position":{"x":-100.207932,"y":638.757874},"seed":-10854,"shader_model":{"code":"vec2 $(name_uv)_emboss = $(name)_fct($uv);","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec2 $(name)_fct(vec2 uv) {\n\tfloat pixels = max(1.0, $width);\n\tfloat e = 1.0/$size;\n\tvec2 rv = vec2(0.0);\n\tfor (float dx = -pixels; dx <= pixels; dx += 1.0) {\n\t\tfor (float dy = -pixels; dy <= pixels; dy += 1.0) {\n\t\t\tif (abs(dx) > 0.5 || abs(dy) > 0.5) {\n\t\t\t\trv += $in(uv+e*vec2(dx, dy)).xy*cos(vec2(atan(dy, dx))-vec2(0.0, 0.5)*3.14159265359)/length(vec2(dx, dy));\n\t\t\t}\n\t\t}\n\t}\n\treturn $amount*rv/pixels+0.5;\n}","name":"Curvature","outputs":[{"f":"0.5*($(name_uv)_emboss.x+$(name_uv)_emboss.y)","type":"f"}],"parameters":[{"default":9,"first":6,"label":"Size","last":12,"name":"size","type":"size"},{"control":"None","default":1,"label":"Amount","max":10,"min":0,"name":"amount","step":0.1,"type":"float"},{"control":"None","default":1,"label":"Width","max":5,"min":1,"name":"width","step":1,"type":"float"}]}},{"name":"598_4","type":"shader","parameters":{"size":10,"amount":1,"width":4},"node_position":{"x":-97.532082,"y":755.803345},"seed":-51278,"shader_model":{"code":"vec2 $(name_uv)_emboss = $(name)_fct($uv);","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec2 $(name)_fct(vec2 uv) {\n\tfloat pixels = max(1.0, $width);\n\tfloat e = 1.0/$size;\n\tvec2 rv = vec2(0.0);\n\tfor (float dx = -pixels; dx <= pixels; dx += 1.0) {\n\t\tfor (float dy = -pixels; dy <= pixels; dy += 1.0) {\n\t\t\tif (abs(dx) > 0.5 || abs(dy) > 0.5) {\n\t\t\t\trv += $in(uv+e*vec2(dx, dy)).xy*cos(vec2(atan(dy, dx))-vec2(0.0, 0.5)*3.14159265359)/length(vec2(dx, dy));\n\t\t\t}\n\t\t}\n\t}\n\treturn $amount*rv/pixels+0.5;\n}","name":"Curvature","outputs":[{"f":"0.5*($(name_uv)_emboss.x+$(name_uv)_emboss.y)","type":"f"}],"parameters":[{"default":9,"first":6,"label":"Size","last":12,"name":"size","type":"size"},{"control":"None","default":1,"label":"Amount","max":10,"min":0,"name":"amount","step":0.1,"type":"float"},{"control":"None","default":1,"label":"Width","max":5,"min":1,"name":"width","step":1,"type":"float"}]}},{"name":"598_5","type":"shader","parameters":{"size":10,"amount":1,"width":8},"node_position":{"x":-95.713867,"y":877.621521},"seed":-36846,"shader_model":{"code":"vec2 $(name_uv)_emboss = $(name)_fct($uv);","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec2 $(name)_fct(vec2 uv) {\n\tfloat pixels = max(1.0, $width);\n\tfloat e = 1.0/$size;\n\tvec2 rv = vec2(0.0);\n\tfor (float dx = -pixels; dx <= pixels; dx += 1.0) {\n\t\tfor (float dy = -pixels; dy <= pixels; dy += 1.0) {\n\t\t\tif (abs(dx) > 0.5 || abs(dy) > 0.5) {\n\t\t\t\trv += $in(uv+e*vec2(dx, dy)).xy*cos(vec2(atan(dy, dx))-vec2(0.0, 0.5)*3.14159265359)/length(vec2(dx, dy));\n\t\t\t}\n\t\t}\n\t}\n\treturn $amount*rv/pixels+0.5;\n}","name":"Curvature","outputs":[{"f":"0.5*($(name_uv)_emboss.x+$(name_uv)_emboss.y)","type":"f"}],"parameters":[{"default":9,"first":6,"label":"Size","last":12,"name":"size","type":"size"},{"control":"None","default":1,"label":"Amount","max":10,"min":0,"name":"amount","step":0.1,"type":"float"},{"control":"None","default":1,"label":"Width","max":5,"min":1,"name":"width","step":1,"type":"float"}]}},{"name":"598_6","type":"shader","parameters":{"size":10,"amount":1,"width":16},"node_position":{"x":-92.077492,"y":992.848633},"seed":-11460,"shader_model":{"code":"vec2 $(name_uv)_emboss = $(name)_fct($uv);","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec2 $(name)_fct(vec2 uv) {\n\tfloat pixels = max(1.0, $width);\n\tfloat e = 1.0/$size;\n\tvec2 rv = vec2(0.0);\n\tfor (float dx = -pixels; dx <= pixels; dx += 1.0) {\n\t\tfor (float dy = -pixels; dy <= pixels; dy += 1.0) {\n\t\t\tif (abs(dx) > 0.5 || abs(dy) > 0.5) {\n\t\t\t\trv += $in(uv+e*vec2(dx, dy)).xy*cos(vec2(atan(dy, dx))-vec2(0.0, 0.5)*3.14159265359)/length(vec2(dx, dy));\n\t\t\t}\n\t\t}\n\t}\n\treturn $amount*rv/pixels+0.5;\n}","name":"Curvature","outputs":[{"f":"0.5*($(name_uv)_emboss.x+$(name_uv)_emboss.y)","type":"f"}],"parameters":[{"default":9,"first":6,"label":"Size","last":12,"name":"size","type":"size"},{"control":"None","default":1,"label":"Amount","max":10,"min":0,"name":"amount","step":0.1,"type":"float"},{"control":"None","default":1,"label":"Width","max":5,"min":1,"name":"width","step":1,"type":"float"}]}},{"name":"fast_blur","type":"graph","parameters":{"param0":10,"param1":2,"param2":1},"node_position":{"x":167.483093,"y":509.757843},"seed":19652,"label":"Fast Blur","shortdesc":"","longdesc":"","nodes":[{"name":"fast_blur_shader","type":"fast_blur_shader","parameters":{"sigma":2,"quality":1,"strength":1},"node_position":{"x":-168,"y":120},"seed":-27696},{"name":"buffer_2","type":"buffer","parameters":{"size":10},"node_position":{"x":-187,"y":61.5},"seed":-48026,"version":1},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-602,"y":91.75},"seed":-11967,"ports":[{"group_size":0,"name":"port0","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":88,"y":61.75},"seed":45717,"ports":[{"group_size":0,"name":"port0","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":10,"param1":2,"param2":1},"node_position":{"x":-254.5,"y":-122.5},"seed":57528,"widgets":[{"label":"Resolution","linked_widgets":[{"node":"buffer_2","widget":"size"}],"name":"param0","type":"linked_control"},{"label":"Sigma","linked_widgets":[{"node":"fast_blur_shader","widget":"sigma"}],"name":"param1","type":"linked_control"},{"label":"Quality","linked_widgets":[{"node":"fast_blur_shader","widget":"quality"}],"name":"param2","type":"linked_control"}]}],"connections":[{"from":"buffer_2","from_port":0,"to":"fast_blur_shader","to_port":0},{"from":"gen_inputs","from_port":0,"to":"buffer_2","to_port":0},{"from":"fast_blur_shader","from_port":0,"to":"gen_outputs","to_port":0}]},{"name":"fast_blur_2","type":"fast_blur","parameters":{"param0":10,"param1":5,"param2":1,"param3":1},"node_position":{"x":167.156082,"y":638.560974},"seed":20295},{"name":"fast_blur_3","type":"fast_blur","parameters":{"param0":10,"param1":8,"param2":1,"param3":1},"node_position":{"x":171.701691,"y":756.742798},"seed":52033},{"name":"fast_blur_4","type":"fast_blur","parameters":{"param0":10,"param1":16,"param2":1,"param3":1},"node_position":{"x":167.377045,"y":877.651917},"seed":20052},{"name":"fast_blur_5","type":"fast_blur","parameters":{"param0":10,"param1":34,"param2":1,"param3":1},"node_position":{"x":170.104279,"y":992.197327},"seed":43382},{"name":"buffer_2","type":"buffer","parameters":{"size":10,"filter":false,"mipmap":false},"node_position":{"x":-426.44928,"y":678.75},"seed":-52020,"version":2}],"connections":[{"from":"blend","from_port":0,"to":"blend_2","to_port":1},{"from":"blend_2","from_port":0,"to":"blend_3","to_port":1},{"from":"blend_3","from_port":0,"to":"blend_4","to_port":1},{"from":"blend_4","from_port":0,"to":"invert","to_port":0},{"from":"invert","from_port":0,"to":"gen_outputs","to_port":0},{"from":"gen_inputs","from_port":0,"to":"normal_map","to_port":0},{"from":"598_3","from_port":0,"to":"fast_blur","to_port":0},{"from":"fast_blur","from_port":0,"to":"blend_4","to_port":0},{"from":"598_2","from_port":0,"to":"fast_blur_2","to_port":0},{"from":"fast_blur_2","from_port":0,"to":"blend_3","to_port":0},{"from":"598_4","from_port":0,"to":"fast_blur_3","to_port":0},{"from":"fast_blur_3","from_port":0,"to":"blend_2","to_port":0},{"from":"598_5","from_port":0,"to":"fast_blur_4","to_port":0},{"from":"fast_blur_4","from_port":0,"to":"blend","to_port":0},{"from":"598_6","from_port":0,"to":"fast_blur_5","to_port":0},{"from":"fast_blur_5","from_port":0,"to":"blend","to_port":1},{"from":"normal_map","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"598_3","to_port":0},{"from":"buffer_2","from_port":0,"to":"598_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"598_4","to_port":0},{"from":"buffer_2","from_port":0,"to":"598_5","to_port":0},{"from":"buffer_2","from_port":0,"to":"598_6","to_port":0}]},{"name":"graph_6","type":"graph","parameters":{"param0":10,"param1":0.01,"param2":15,"param3":0.08,"param4":10,"param5":0.2},"node_position":{"x":-519.394226,"y":355.544678},"seed":6741,"label":"HBAO","shortdesc":"","longdesc":"","nodes":[{"name":"voronoi_3","type":"shader","parameters":{"radius":0.01,"angleBiasDeg":15,"intensity":0.2,"depth_scale":0.08,"quality":10},"node_position":{"x":-600.80072,"y":-894.601807},"seed":49449,"shader_model":{"code":"","global":"","inputs":[{"default":"0.0","function":true,"label":"","name":"in","type":"f"}],"instance":"//inspired by:\n//http://developer.download.nvidia.com/presentations/2008/SIGGRAPH/HBAO_SIG08b.pdf\n//https://gist.github.com/dotModded/981206ae1f4e760b7348\n//https://github.com/scanberg/hbao/blob/master/resources/shaders/hbao_full_frag.glsl\n//radius - radius of influence in screen space\n//angleBiasDeg - ~minimum angle for AO\n//intensity - increase strength of caclulated AO\n//noiseScale - for randomization values\nfloat $(name)_hbao(vec2 uv, float radius, float angleBiasDeg, float intensity, vec2 noiseScale) {\n  int samplig_directions = 8;\n  int steps = int($quality);\n\n  float angleBias = 0.0174532925 * angleBiasDeg;\n\n  vec3 c_point = vec3(uv*2.0 - 1.0, $in(uv)*$depth_scale);\n  //fun with dfdx & dfdy - https://community.khronos.org/t/getting-the-normal-with-dfdx-and-dfdy/70177\n  vec3 c_normal = normalize(cross(dFdx(c_point), dFdy(c_point)));\n\n\n  float cosMaxRot = cos(6.28318530718 / float(samplig_directions));\n  float sinMaxROt = sin(6.28318530718 / float(samplig_directions));\n  \n  // it should be faster than standard rotation in each iteartion\n  mat2 deltaRotationMatrix = mat2(\n\tvec2(cosMaxRot, -sinMaxROt),\n\tvec2(sinMaxROt, cosMaxRot)\n  );\n  \n  // calculate starting offset, as the smallest step\n  vec2 offset_uv = vec2(1.0, 0.0) * (radius /float(steps));\n\n  //randomize angle\n  vec3 sampleNoise\t= rand3(uv * noiseScale);\n  sampleNoise.xy\t  = sampleNoise.xy * 2.0 - vec2(1.0);\n  mat2 rotationMatrix = mat2(vec2(sampleNoise.x, -sampleNoise.y), \n\t\t\t\t\t\t\t vec2(sampleNoise.y,  sampleNoise.x));\n  \n  // apply a random rotation to the base step vector\n  offset_uv = rotationMatrix * offset_uv;\n  \n  float jitter = sampleNoise.z;\n  float occlusion = 0.0;\n  \n  for (int i = 0; i < samplig_directions; ++i) {\n\t// incrementally rotate sample direction\n\toffset_uv = deltaRotationMatrix * offset_uv;\n\tfloat oldAngle   = angleBias;\n\tfor (int j = 0; j < steps; ++j) {\n\t  //add jitter & distance to offset UV\n\t  vec2 sample_uv\t = uv + (jitter + float(j)) * offset_uv;\n\t  vec3 s_point\t = vec3(sample_uv*2.0 - 1.0, $in(sample_uv)*$depth_scale);\n\t  vec3 sample_tan  = (s_point - c_point); //not sure if correct, but looks ok\n\t  // 90 deg - (angle between normal from current point &  sampled tangent)\n\t  //https://math.stackexchange.com/questions/654315/how-to-convert-a-dot-product-of-two-vectors-to-the-angle-between-the-vectors\n\t  float gamma = 1.57079632679 - acos(dot(c_normal, normalize(sample_tan)));\n\t  \n\t  if (gamma > oldAngle) {\n\t\tfloat value = sin(gamma) - sin(oldAngle);\n\t\tfloat attenuation = clamp(1.0 - pow(length(sample_tan.xy)/radius, 2.0), 0.0, 1.0);\n\t\tocclusion += attenuation * value;\n\t\t//occlusion += value;\n\t\toldAngle = gamma;\n\t  }\n\t}\n  }\n  \n  occlusion = 1.0 - occlusion / float(samplig_directions);\n  return clamp(pow(occlusion, 1.0 + intensity), 0.0, 1.0);\n}","longdesc":"A node that generates several images from a tileable voronoi noise","name":"HBAO","outputs":[{"f":"$(name)_hbao($uv,$radius, $angleBiasDeg, $intensity, vec2(16.0,16.0))","longdesc":"A color pattern that assigns a random color to each cell","shortdesc":"Random color","type":"f"}],"parameters":[{"control":"None","default":0.01,"label":"Radius","longdesc":"The scale along the X axis","max":1,"min":0,"name":"radius","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":30,"label":"Angle Bias","longdesc":"Angle bias for AO","max":90,"min":0,"name":"angleBiasDeg","shortdesc":"Angle Bias","step":1,"type":"float"},{"control":"None","default":0.2,"label":"Intensity","longdesc":"Change intensity of AO","max":5,"min":0,"name":"intensity","shortdesc":"Intensity","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Depth Scale","longdesc":"Lineary scales depth values afecting  cacluated normals & tangents","max":1,"min":0,"name":"depth_scale","shortdesc":"Depth Scale","step":0.01,"type":"float"},{"control":"None","default":4,"label":"Steps","longdesc":"Steps in given direction per ray","max":12,"min":1,"name":"quality","shortdesc":"Quality","step":1,"type":"float"}],"shortdesc":"Voronoi Noise"}},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-1338.030762,"y":-788.080872},"seed":43798,"ports":[{"group_size":0,"longdesc":"Greyscale heightmap","name":"input","shortdesc":"Input","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":-902.684204,"y":-327.282288},"seed":42623,"ports":[{"group_size":0,"longdesc":"","name":"port0","shortdesc":"AO","type":"f"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":10,"param1":0.01,"param2":15,"param3":0.08,"param4":10,"param5":0.2},"node_position":{"x":-1488.979004,"y":-561.71167},"seed":58911,"widgets":[{"label":"Size","linked_widgets":[{"node":"voronoi_2","widget":"size"},{"node":"buffer_2","widget":"size"},{"node":"buffer_5","widget":"size"},{"node":"buffer_7","widget":"size"}],"name":"param0","shortdesc":"Size","type":"linked_control"},{"label":"Radius","linked_widgets":[{"node":"voronoi_3","widget":"radius"}],"longdesc":"Affected radius of point in UV size","name":"param1","shortdesc":"Radius","type":"linked_control"},{"label":"Angle Bias","linked_widgets":[{"node":"voronoi_3","widget":"angleBiasDeg"}],"longdesc":"Minimum angle on heightmap for AO to occur. Angle is calculated in UV space, where depth (grayscale input) is scaled by \"Depth Scale\" parameter","name":"param2","shortdesc":"Angle bias","type":"linked_control"},{"label":"Depth Scale","linked_widgets":[{"node":"voronoi_3","widget":"depth_scale"}],"longdesc":"Lineary scales depth values afecting  cacluated normals & tangents","name":"param3","shortdesc":"Depth Scale","type":"linked_control"},{"label":"Quality","linked_widgets":[{"node":"voronoi_3","widget":"quality"}],"longdesc":"Number of steps per direction sampling","name":"param4","shortdesc":"Quality","type":"linked_control"},{"label":"Intensity","linked_widgets":[{"node":"voronoi_3","widget":"intensity"}],"longdesc":"Change intensity of calculated AO","name":"param5","shortdesc":"Intensity","type":"linked_control"}]},{"name":"voronoi_2","type":"shader","parameters":{"size":10,"sigma":3,"ksigma":4,"threshold":0.7},"node_position":{"x":-710.111145,"y":-596.459534},"seed":38722,"shader_model":{"code":"","global":"","inputs":[{"default":"0.0","function":true,"label":"","name":"in","type":"rgba"}],"instance":"//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n//  Copyright (c) 2018-2019 Michele Morrone\n//  All rights reserved.\n//\n//  https://michelemorrone.eu - https://BrutPitt.com\n//\n//  me@michelemorrone.eu - brutpitt@gmail.com\n//  twitter: @BrutPitt - github: BrutPitt\n//  \n//  https://github.com/BrutPitt/glslSmartDeNoise/\n//\n//  This software is distributed under the terms of the BSD 2-Clause license\n//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n//  smartDeNoise - parameters\n//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n//\n//  sampler2D tex\t - sampler image / texture\n//  vec2 uv\t\t   - actual fragment coord\n//  float sigma  >  0 - sigma Standard Deviation\n//  float kSigma >= 0 - sigma coefficient \n//\t  kSigma * sigma  -->  radius of the circular kernel\n//  float threshold   - edge sharpening threshold \nvec4 $(name)_smartDeNoise(vec2 uv, float sigma, float kSigma, float threshold)\n{\n\tfloat INV_SQRT_OF_2PI = 0.39894228040143267793994605993439; // 1.0/SQRT_OF_2PI\n\tfloat INV_PI = 0.31830988618379067153776752674503;\n\tfloat radius = round(kSigma*sigma);\n\tfloat radQ = radius * radius;\n\n\tfloat invSigmaQx2 = .5 / (sigma * sigma);\t  // 1.0 / (sigma^2 * 2.0)\n\tfloat invSigmaQx2PI = INV_PI * invSigmaQx2;\t// 1/(2 * PI * sigma^2)\n\n\tfloat invThresholdSqx2 = .5 / (threshold * threshold);\t // 1.0 / (sigma^2 * 2.0)\n\tfloat invThresholdSqrt2PI = INV_SQRT_OF_2PI / threshold;   // 1.0 / (sqrt(2*PI) * sigma^2)\n\n\tvec4 centrPx = $in(uv); \n\n\tfloat zBuff = 0.0;\n\tvec4 aBuff = vec4(0.0);\n\tvec2 size = vec2($size, $size);\n\n\tvec2 d;\n\tfor (d.x=-radius; d.x <= radius; d.x++) {\n\t\tfloat pt = sqrt(radQ-d.x*d.x);\t   // pt = yRadius: have circular trend\n\t\tfor (d.y=-pt; d.y <= pt; d.y++) {\n\t\t\tfloat blurFactor = exp( -dot(d , d) * invSigmaQx2 ) * invSigmaQx2PI;\n\n\t\t\tvec4 walkPx =  $in(uv+d/size);\n\t\t\tvec4 dC = walkPx-centrPx;\n\t\t\tfloat deltaFactor = exp( -dot(dC, dC) * invThresholdSqx2) * invThresholdSqrt2PI * blurFactor;\n\n\t\t\tzBuff += deltaFactor;\n\t\t\taBuff += deltaFactor*walkPx;\n\t\t}\n\t}\n\treturn aBuff/zBuff;\n}","longdesc":"A node that generates several images from a tileable voronoi noise","name":"Denoiser","outputs":[{"longdesc":"A color pattern that assigns a random color to each cell","rgba":"$(name)_smartDeNoise($uv, $sigma, $ksigma, $threshold)","shortdesc":"Random color","type":"rgba"}],"parameters":[{"default":10,"first":0,"label":"size","last":12,"longdesc":"The scale along the X axis","name":"size","shortdesc":"Scale.x","type":"size"},{"control":"None","default":0.5,"label":"Sigma","max":1,"min":0.005,"name":"sigma","step":0.1,"type":"float"},{"control":"None","default":0.5,"label":"kSigma","max":1,"min":0,"name":"ksigma","step":0.1,"type":"float"},{"control":"None","default":0.5,"label":"threshold","max":1,"min":0,"name":"threshold","step":0.1,"type":"float"}],"shortdesc":"Voronoi Noise"}},{"name":"buffer_5","type":"buffer","parameters":{"size":10},"node_position":{"x":-931.449646,"y":-724.330017},"seed":6771,"version":1},{"name":"buffer_7","type":"buffer","parameters":{"size":10},"node_position":{"x":-948.36377,"y":-449.796295},"seed":16139,"version":1},{"name":"buffer_2","type":"buffer","parameters":{"size":10},"node_position":{"x":-976.009644,"y":-975.5},"seed":42465,"version":1}],"connections":[{"from":"voronoi_3","from_port":0,"to":"buffer_5","to_port":0},{"from":"voronoi_2","from_port":0,"to":"buffer_7","to_port":0},{"from":"buffer_7","from_port":0,"to":"gen_outputs","to_port":0},{"from":"gen_inputs","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"voronoi_3","to_port":0},{"from":"buffer_5","from_port":0,"to":"voronoi_2","to_port":0}]},{"name":"normal_map2","type":"graph","parameters":{"param2":0,"size":11,"strength":0.5,"buffer":1},"node_position":{"x":-488.839966,"y":217.480011},"seed_int":0,"label":"Normal Map","shortdesc":"Normal map","longdesc":"Generates a normal map from a height map","nodes":[{"name":"buffer","type":"buffer","parameters":{"size":11,"lod":0},"node_position":{"x":-695.663818,"y":-44.39386},"seed":-32011},{"name":"gen_parameters","type":"remote","parameters":{"param2":0,"size":11,"strength":0.5,"buffer":1},"node_position":{"x":-802.910156,"y":-293.916687},"seed":56582,"widgets":[{"label":"","linked_widgets":[{"node":"edge_detect_1","widget":"algo"}],"longdesc":"The algorithm used to generate the normal map","name":"param2","shortdesc":"Algorithm","type":"linked_control"},{"label":"","linked_widgets":[{"node":"buffer","widget":"size"},{"node":"edge_detect_1","widget":"size"}],"longdesc":"The resolution of the generated normal map","name":"size","shortdesc":"Resolution","type":"linked_control"},{"label":"","linked_widgets":[{"node":"edge_detect_1","widget":"amount"}],"longdesc":"The strength of the normal map filter","name":"strength","shortdesc":"Strength","type":"linked_control"},{"configurations":{"False":[{"node":"switch","value":0,"widget":"source"}],"True":[{"node":"switch","value":1,"widget":"source"}]},"label":"Buffer","linked_widgets":[{"node":"switch","widget":"source"}],"longdesc":"When set, a buffer is used to sample the input before the normal map filter","name":"buffer","shortdesc":"Buffer","type":"config_control"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":-445.663818,"y":75.047363},"seed":-6314,"ports":[{"group_size":0,"longdesc":"Shows the generated normal map","name":"Normal","shortdesc":"Output","type":"rgb"}]},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-1094.910156,"y":74.047363},"seed":12483,"seed_locked":true,"ports":[{"group_size":0,"longdesc":"The input height map","name":"Bump","shortdesc":"Input","type":"f"}]},{"name":"switch","type":"switch","parameters":{"outputs":1,"choices":2,"source":1},"node_position":{"x":-675.5,"y":110.297363},"seed":-53264},{"name":"edge_detect_1","type":"shader","parameters":{"algo":0,"size":11,"amount":0.5},"node_position":{"x":-674.092529,"y":211.868774},"seed":-11547,"shader_model":{"code":"","global":"","inputs":[{"default":"0.0","function":true,"label":"","name":"in","type":"f"}],"instance":"vec3 nm_$name(vec2 uv, float amount, float size) {\n\tvec3 e = vec3(1.0/size, -1.0/size, 0);\n\tvec2 rv;\n\tif ($algo == 0) {\n\t\trv = vec2(1.0, -1.0)*$in(uv+e.xy);\n\t\trv += vec2(-1.0, 1.0)*$in(uv-e.xy);\n\t\trv += vec2(1.0, 1.0)*$in(uv+e.xx);\n\t\trv += vec2(-1.0, -1.0)*$in(uv-e.xx);\n\t\trv += vec2(2.0, 0.0)*$in(uv+e.xz);\n\t\trv += vec2(-2.0, 0.0)*$in(uv-e.xz);\n\t\trv += vec2(0.0, 2.0)*$in(uv+e.zx);\n\t\trv += vec2(0.0, -2.0)*$in(uv-e.zx);\n\t\trv *= size*amount/128.0;\n\t} else if ($algo == 1) {\n\t\trv = vec2(3.0, -3.0)*$in(uv+e.xy);\n\t\trv += vec2(-3.0, 3.0)*$in(uv-e.xy);\n\t\trv += vec2(3.0, 3.0)*$in(uv+e.xx);\n\t\trv += vec2(-3.0, -3.0)*$in(uv-e.xx);\n\t\trv += vec2(10.0, 0.0)*$in(uv+e.xz);\n\t\trv += vec2(-10.0, 0.0)*$in(uv-e.xz);\n\t\trv += vec2(0.0, 10.0)*$in(uv+e.zx);\n\t\trv += vec2(0.0, -10.0)*$in(uv-e.zx);\n\t\trv *= size*amount/512.0;\n\t} else if ($algo == 2) {\n\t\trv = vec2(2.0, 0.0)*$in(uv+e.xz);\n\t\trv += vec2(-2.0, 0.0)*$in(uv-e.xz);\n\t\trv += vec2(0.0, 2.0)*$in(uv+e.zx);\n\t\trv += vec2(0.0, -2.0)*$in(uv-e.zx);\n\t\trv *= size*amount/64.0;\n\t} else {\n\t\trv = vec2(1.0, 0.0)*$in(uv+e.xz);\n\t\trv += vec2(0.0, 1.0)*$in(uv+e.zx);\n\t\trv += vec2(-1.0, -1.0)*$in(uv);\n\t\trv *= size*amount/20.0;\n\t}\n\treturn vec3(0.5)+0.5*normalize(vec3(rv, -1.0));\n}\n","name":"Normal map","outputs":[{"rgb":"nm_$name($uv, $amount, $size)","type":"rgb"}],"parameters":[{"default":3,"label":"","name":"algo","type":"enum","values":[{"name":"Sobel","value":"0"},{"name":"Scharr","value":"1"},{"name":"Simple","value":"2"},{"name":"Cheap","value":"3"}]},{"default":9,"first":4,"label":"","last":12,"name":"size","type":"size"},{"control":"None","default":0.5,"label":"","max":2,"min":0,"name":"amount","step":0.01,"type":"float"}]}},{"name":"pack_2x32_to_4x16_3","type":"pack_1x32_to_2x16","parameters":{},"node_position":{"x":-695.7901,"y":-104.091614},"seed_int":0},{"name":"pack_4x16_to_2x32_3","type":"pack_2x16_to_1x32","parameters":{},"node_position":{"x":-698.7901,"y":46.908386},"seed_int":0}],"connections":[{"from":"gen_inputs","from_port":0,"to":"switch","to_port":0},{"from":"edge_detect_1","from_port":0,"to":"gen_outputs","to_port":0},{"from":"switch","from_port":0,"to":"edge_detect_1","to_port":0},{"from":"gen_inputs","from_port":0,"to":"pack_2x32_to_4x16_3","to_port":0},{"from":"pack_2x32_to_4x16_3","from_port":0,"to":"buffer","to_port":0},{"from":"buffer","from_port":0,"to":"pack_4x16_to_2x32_3","to_port":0},{"from":"pack_4x16_to_2x32_3","from_port":0,"to":"switch","to_port":1}]},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-1035.394287,"y":259.180664},"seed_int":0,"ports":[{"name":"GretS","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":-177.402985,"y":259.180664},"seed_int":0,"ports":[{"longdesc":"","name":"SmoothC","shortdesc":"","type":"rgba"},{"name":"Normal","type":"rgb"},{"name":"AO","type":"f"},{"name":"Pass","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":0.5,"param1":0.5,"param2":0.01,"param3":0.2},"node_position":{"x":-481.408539,"y":-106.530846},"seed_int":0,"widgets":[{"label":"CurveParameter","linked_widgets":[{"node":"smooth_curvature","widget":"param2"}],"name":"param0","type":"linked_control"},{"label":"NormalIntensity","linked_widgets":[{"node":"normal_map2","widget":"strength"}],"name":"param1","type":"linked_control"},{"label":"AO Radius","linked_widgets":[{"node":"graph_6","widget":"param1"}],"name":"param2","type":"linked_control"},{"label":"AO Intensity","linked_widgets":[{"node":"graph_6","widget":"param5"}],"name":"param3","type":"linked_control"}]},{"name":"reroute","type":"reroute","parameters":{},"node_position":{"x":-400.060608,"y":641.947205},"seed_int":0}],"connections":[{"from":"gen_inputs","from_port":0,"to":"normal_map2","to_port":0},{"from":"normal_map2","from_port":0,"to":"gen_outputs","to_port":1},{"from":"gen_inputs","from_port":0,"to":"graph_6","to_port":0},{"from":"gen_inputs","from_port":0,"to":"smooth_curvature","to_port":0},{"from":"smooth_curvature","from_port":0,"to":"gen_outputs","to_port":0},{"from":"graph_6","from_port":0,"to":"gen_outputs","to_port":2},{"from":"gen_inputs","from_port":0,"to":"reroute","to_port":0},{"from":"reroute","from_port":0,"to":"gen_outputs","to_port":3}]},{"name":"invert","type":"invert","parameters":{},"node_position":{"x":1036.240112,"y":336.883209},"seed_int":0},{"name":"tiler","type":"tiler","parameters":{"tx":10,"ty":13,"overlap":5,"inputs":0,"scale_x":0.52,"scale_y":0.33,"fixed_offset":0,"offset":0.12,"rotate":17.4,"scale":0.43,"value":2.31,"variations":false},"node_position":{"x":-3842.605713,"y":200.998444},"seed_int":3141397760},{"name":"shape","type":"shape","parameters":{"shape":1,"sides":8,"radius":0.9,"edge":0.34},"node_position":{"x":-5605.554688,"y":102.317062},"seed_int":0},{"name":"blend2","type":"blend2","parameters":{"blend_type1":2,"amount1":0.78},"node_position":{"x":-4375.94873,"y":178.219818},"seed_int":0,"generic_size":1},{"name":"blend2_2","type":"blend2","parameters":{"blend_type1":2,"amount1":0.91},"node_position":{"x":-4719.050781,"y":297.336273},"seed_int":0,"generic_size":1},{"name":"gradient","type":"gradient","parameters":{"repeat":1,"rotate":0,"gradient":{"type":"Gradient","points":[{"pos":0.036107,"r":0,"g":0,"b":0,"a":1},{"pos":0.768833,"r":1,"g":1,"b":1,"a":1}],"interpolation":1}},"node_position":{"x":-4969.741211,"y":250.412674},"seed_int":0},{"name":"gradient_2","type":"gradient","parameters":{"repeat":1,"rotate":90,"gradient":{"type":"Gradient","points":[{"pos":0.11365,"r":0,"g":0,"b":0,"a":1},{"pos":0.92862,"r":1,"g":1,"b":1,"a":1}],"interpolation":1}},"node_position":{"x":-4965.276855,"y":378.912659},"seed_int":0},{"name":"warp","type":"warp","parameters":{"mode":0,"amount":0.055,"eps":0.105},"node_position":{"x":-4578.910645,"y":29.855637},"seed_int":0},{"name":"graph_2","type":"graph","parameters":{"param0":3,"param1":3,"param2":3,"param3":0.5,"param4":0.5,"param5":0.5},"node_position":{"x":-4846.241211,"y":-100.136581},"seed_int":0,"label":"Warp2","shortdesc":"","longdesc":"","nodes":[{"name":"transform","type":"transform","parameters":{"translate_x":0.5,"translate_y":0.5,"rotate":0,"scale_x":1,"scale_y":1,"repeat":true},"node_position":{"x":-292.25,"y":-629},"seed":32047},{"name":"perlin","type":"perlin","parameters":{"scale_x":3,"scale_y":3,"iterations":3,"persistence":0.5},"node_position":{"x":-558.25,"y":-720},"seed":55134},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-802.25,"y":-655.5},"seed":32147,"ports":[]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":268.75,"y":-656.5},"seed":-38652,"ports":[{"name":"port0","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":3,"param1":3,"param2":3,"param3":0.5,"param4":0.5,"param5":0.5},"node_position":{"x":-315.75,"y":-905},"seed":18604,"widgets":[{"label":"Scale X","linked_widgets":[{"node":"perlin","widget":"scale_x"}],"name":"param0","type":"linked_control"},{"label":"Scale Y","linked_widgets":[{"node":"perlin","widget":"scale_y"}],"name":"param1","type":"linked_control"},{"label":"Iterations","linked_widgets":[{"node":"perlin","widget":"iterations"}],"name":"param2","type":"linked_control"},{"label":"Persistance","linked_widgets":[{"node":"perlin","widget":"persistence"}],"name":"param3","type":"linked_control"},{"label":"Warp X","linked_widgets":[{"node":"transform","widget":"translate_x"},{"node":"transform_2","widget":"translate_x"}],"name":"param4","type":"linked_control"},{"label":"Warp Y","linked_widgets":[{"node":"transform","widget":"translate_y"},{"node":"transform_2","widget":"translate_y"}],"name":"param5","type":"linked_control"}]},{"name":"transform_2","type":"transform","parameters":{"translate_x":0.5,"translate_y":0.5,"rotate":0,"scale_x":1,"scale_y":1,"repeat":true},"node_position":{"x":-32.462402,"y":-714.099976},"seed":57622}],"connections":[{"from":"perlin","from_port":0,"to":"transform","to_port":1},{"from":"transform_2","from_port":0,"to":"gen_outputs","to_port":0},{"from":"perlin","from_port":0,"to":"transform","to_port":2},{"from":"perlin","from_port":0,"to":"transform_2","to_port":0},{"from":"transform","from_port":0,"to":"transform_2","to_port":1},{"from":"transform","from_port":0,"to":"transform_2","to_port":2},{"from":"perlin","from_port":0,"to":"transform","to_port":0}]},{"name":"auto_tones","type":"auto_tones","parameters":{"param0":10},"node_position":{"x":-4098.615234,"y":202.578415},"seed_int":0},{"name":"reroute","type":"reroute","parameters":{},"node_position":{"x":408.731232,"y":-114.86042},"seed_int":0},{"name":"colorize_2","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0,"r":0.136719,"g":0.097534,"b":0.061768,"a":1},{"pos":0.147693,"r":0.289551,"g":0.238525,"b":0.175781,"a":1},{"pos":0.33621,"r":0.297852,"g":0.234741,"b":0.175781,"a":1},{"pos":0.480887,"r":0.437988,"g":0.371338,"b":0.269287,"a":1},{"pos":0.608026,"r":0.508789,"g":0.430664,"b":0.33252,"a":1},{"pos":0.752702,"r":0.424072,"g":0.357422,"b":0.284424,"a":1},{"pos":0.888609,"r":0.535156,"g":0.492188,"b":0.414551,"a":1},{"pos":1,"r":0.509766,"g":0.477539,"b":0.395752,"a":1}],"interpolation":1}},"node_position":{"x":850.271057,"y":-163.328796},"seed_int":0},{"name":"quantize","type":"quantize","parameters":{"steps":4},"node_position":{"x":811.741089,"y":-464.406006},"seed_int":0},{"name":"blend2_3","type":"blend2","parameters":{"blend_type1":6,"amount1":0.19},"node_position":{"x":1178.216064,"y":-153.140945},"seed_int":0,"generic_size":1},{"name":"tones","type":"tones","parameters":{"in_min":{"type":"Color","r":0.484664,"g":0.484664,"b":0.484664,"a":0},"in_mid":{"type":"Color","r":0.680266,"g":0.680266,"b":0.680266,"a":0.5},"in_max":{"type":"Color","r":1,"g":1,"b":1,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":890.224731,"y":58.35556},"seed_int":0},{"name":"colorize","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0,"r":0,"g":0,"b":0,"a":1},{"pos":1,"r":0.850252,"g":0.871094,"b":0.48999,"a":1}],"interpolation":2}},"node_position":{"x":1223.966431,"y":57.75161},"seed_int":0},{"name":"blend2_4","type":"blend2","parameters":{"blend_type1":3,"amount1":0.49},"node_position":{"x":1521.048584,"y":-95.961838},"seed_int":0,"generic_size":1},{"name":"fbm2","type":"fbm2","parameters":{"noise":0,"scale_x":4,"scale_y":4,"folds":0,"iterations":5,"persistence":0.5,"offset":0},"node_position":{"x":765.228943,"y":-730.197205},"seed_int":0},{"name":"warp_2","type":"warp","parameters":{"mode":0,"amount":0.08,"eps":0.085},"node_position":{"x":1083.633301,"y":-536.617798},"seed_int":0},{"name":"reroute_2","type":"reroute","parameters":{},"node_position":{"x":-624.072876,"y":221.115585},"seed_int":0},{"name":"reroute_3","type":"reroute","parameters":{},"node_position":{"x":-3458.845459,"y":218.881958},"seed_int":0},{"name":"reroute_4","type":"reroute","parameters":{},"node_position":{"x":-3441.2771,"y":-388.625427},"seed_int":0},{"name":"blend2_5","type":"blend2","parameters":{"blend_type1":6,"amount1":0.01},"node_position":{"x":-2993.174805,"y":214.009979},"seed_int":0,"generic_size":1},{"name":"voronoi2","type":"voronoi2","parameters":{"scale_x":17,"scale_y":17,"stretch_x":1,"stretch_y":1,"intensity":1,"randomness":0.85},"node_position":{"x":-3559.291016,"y":502.335968},"seed_int":0},{"name":"tones_2","type":"tones","parameters":{"in_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"in_mid":{"type":"Color","r":0.582465,"g":0.582465,"b":0.582465,"a":0.5},"in_max":{"type":"Color","r":1,"g":1,"b":1,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":-3208.527344,"y":502.226318},"seed_int":0},{"name":"blend2_6","type":"blend2","parameters":{"blend_type1":4,"amount1":0.025},"node_position":{"x":-2325.261963,"y":206.404648},"seed_int":0,"generic_size":1},{"name":"graph_3","type":"graph","parameters":{"param0":7,"param1":6,"param2":3,"param3":0.25,"param4":0.53,"param5":0.37},"node_position":{"x":-2809.781738,"y":527.9646},"seed_int":0,"label":"Warp1","shortdesc":"","longdesc":"","nodes":[{"name":"transform","type":"transform","parameters":{"translate_x":0.53,"translate_y":0.37,"rotate":0,"scale_x":1,"scale_y":1,"repeat":true},"node_position":{"x":-259.25,"y":-658},"seed":32461},{"name":"perlin","type":"perlin","parameters":{"scale_x":7,"scale_y":6,"iterations":3,"persistence":0.25},"node_position":{"x":-502.25,"y":-653},"seed":1093},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-670.25,"y":-647.5},"seed":29095,"ports":[]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":18.75,"y":-657.5},"seed":-12991,"ports":[{"name":"port0","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":7,"param1":6,"param2":3,"param3":0.25,"param4":0.53,"param5":0.37},"node_position":{"x":-315.75,"y":-893},"seed":18520,"widgets":[{"label":"Scale X","linked_widgets":[{"node":"perlin","widget":"scale_x"}],"name":"param0","type":"linked_control"},{"label":"Scale Y","linked_widgets":[{"node":"perlin","widget":"scale_y"}],"name":"param1","type":"linked_control"},{"label":"Iterations","linked_widgets":[{"node":"perlin","widget":"iterations"}],"name":"param2","type":"linked_control"},{"label":"Persistance","linked_widgets":[{"node":"perlin","widget":"persistence"}],"name":"param3","type":"linked_control"},{"label":"Warp X","linked_widgets":[{"node":"transform","widget":"translate_x"}],"name":"param4","type":"linked_control"},{"label":"Warp Y","linked_widgets":[{"node":"transform","widget":"translate_y"}],"name":"param5","type":"linked_control"}]}],"connections":[{"from":"perlin","from_port":0,"to":"transform","to_port":1},{"from":"perlin","from_port":0,"to":"transform","to_port":2},{"from":"perlin","from_port":0,"to":"transform","to_port":0},{"from":"transform","from_port":0,"to":"gen_outputs","to_port":0}]},{"name":"fbm2_2","type":"fbm2","parameters":{"noise":1,"scale_x":18,"scale_y":7,"folds":0,"iterations":5,"persistence":0.5,"offset":0},"node_position":{"x":-2540.239502,"y":666.631775},"seed_int":0},{"name":"auto_tones_2","type":"auto_tones","parameters":{"param0":10},"node_position":{"x":-255.06485,"y":194.759232},"seed_int":0},{"name":"blend2_7","type":"blend2","parameters":{"blend_type1":2,"amount1":0.47},"node_position":{"x":-2240.937744,"y":519.649231},"seed_int":0,"generic_size":1},{"name":"reroute_5","type":"reroute","parameters":{},"node_position":{"x":-3100.924316,"y":-299.860809},"seed_int":0},{"name":"blend2_8","type":"blend2","parameters":{"blend_type1":6,"amount1":0.035},"node_position":{"x":1320.027954,"y":-383.082794},"seed_int":0,"generic_size":1},{"name":"blend2_9","type":"blend2","parameters":{"blend_type1":0,"amount1":0.12},"node_position":{"x":333.781525,"y":471.721252},"seed_int":0,"generic_size":1},{"name":"fbm2_3","type":"fbm2","parameters":{"noise":1,"scale_x":8,"scale_y":6,"folds":0,"iterations":5,"persistence":0.5,"offset":0},"node_position":{"x":-84.747757,"y":537.087097},"seed_int":0},{"name":"normal_map2","type":"normal_map2","parameters":{"param2":0,"size":10,"strength":1,"buffer":1},"node_position":{"x":630.171143,"y":451.246033},"seed_int":0},{"name":"blend2_10","type":"blend2","parameters":{"blend_type1":2,"amount1":0.35},"node_position":{"x":673.429199,"y":856.664612},"seed_int":0,"generic_size":1},{"name":"tones_3","type":"tones","parameters":{"in_min":{"type":"Color","r":1,"g":1,"b":1,"a":0},"in_mid":{"type":"Color","r":0.747155,"g":0.747155,"b":0.747155,"a":0.5},"in_max":{"type":"Color","r":0,"g":0,"b":0,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":243.483124,"y":827.680969},"seed_int":0},{"name":"warp_3","type":"warp","parameters":{"mode":0,"amount":0.48,"eps":0.195},"node_position":{"x":289.612061,"y":1111.45459},"seed_int":0},{"name":"graph_4","type":"graph","parameters":{"param0":4,"param1":4,"param2":3,"param3":0.5,"param4":0.5,"param5":0.5},"node_position":{"x":-67.387939,"y":1062.45459},"seed_int":0,"label":"Warp2","shortdesc":"","longdesc":"","nodes":[{"name":"transform","type":"transform","parameters":{"translate_x":0.5,"translate_y":0.5,"rotate":0,"scale_x":1,"scale_y":1,"repeat":true},"node_position":{"x":-292.25,"y":-629},"seed":32047},{"name":"perlin","type":"perlin","parameters":{"scale_x":4,"scale_y":4,"iterations":3,"persistence":0.5},"node_position":{"x":-558.25,"y":-720},"seed":55134},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-802.25,"y":-655.5},"seed":32147,"ports":[]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":268.75,"y":-656.5},"seed":-38652,"ports":[{"name":"port0","type":"rgba"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":4,"param1":4,"param2":3,"param3":0.5,"param4":0.5,"param5":0.5},"node_position":{"x":-315.75,"y":-905},"seed":18604,"widgets":[{"label":"Scale X","linked_widgets":[{"node":"perlin","widget":"scale_x"}],"name":"param0","type":"linked_control"},{"label":"Scale Y","linked_widgets":[{"node":"perlin","widget":"scale_y"}],"name":"param1","type":"linked_control"},{"label":"Iterations","linked_widgets":[{"node":"perlin","widget":"iterations"}],"name":"param2","type":"linked_control"},{"label":"Persistance","linked_widgets":[{"node":"perlin","widget":"persistence"}],"name":"param3","type":"linked_control"},{"label":"Warp X","linked_widgets":[{"node":"transform","widget":"translate_x"},{"node":"transform_2","widget":"translate_x"}],"name":"param4","type":"linked_control"},{"label":"Warp Y","linked_widgets":[{"node":"transform","widget":"translate_y"},{"node":"transform_2","widget":"translate_y"}],"name":"param5","type":"linked_control"}]},{"name":"transform_2","type":"transform","parameters":{"translate_x":0.5,"translate_y":0.5,"rotate":0,"scale_x":1,"scale_y":1,"repeat":true},"node_position":{"x":-32.462402,"y":-714.099976},"seed":57622}],"connections":[{"from":"perlin","from_port":0,"to":"transform","to_port":1},{"from":"transform_2","from_port":0,"to":"gen_outputs","to_port":0},{"from":"perlin","from_port":0,"to":"transform","to_port":2},{"from":"perlin","from_port":0,"to":"transform_2","to_port":0},{"from":"transform","from_port":0,"to":"transform_2","to_port":1},{"from":"transform","from_port":0,"to":"transform_2","to_port":2},{"from":"perlin","from_port":0,"to":"transform","to_port":0}]},{"name":"tones_4","type":"tones","parameters":{"in_min":{"type":"Color","r":0.042197,"g":0.042197,"b":0.042197,"a":0},"in_mid":{"type":"Color","r":0.385465,"g":0.385465,"b":0.385465,"a":0.5},"in_max":{"type":"Color","r":0.587071,"g":0.587071,"b":0.587071,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":1261.266724,"y":579.189575},"seed_int":0},{"name":"transform2","type":"transform2","parameters":{"translate_x":0,"translate_y":0,"rotate":15.48,"scale_x":1,"scale_y":0.905,"mode":1},"node_position":{"x":-5333.365234,"y":95.68718},"seed_int":0,"generic_size":1},{"name":"blend2_11","type":"blend2","parameters":{"blend_type1":11,"amount1":0.01},"node_position":{"x":-1664.266113,"y":193.922668},"seed_int":0,"generic_size":1},{"name":"scratches","type":"scratches","parameters":{"length":0.36,"width":0.25,"layers":8,"waviness":0.73,"angle":-1,"randomness":0.44},"node_position":{"x":-2231.577881,"y":700.22113},"seed_int":0},{"name":"transform2_2","type":"transform2","parameters":{"translate_x":0.352435,"translate_y":-0.331805,"rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":-1560.057983,"y":715.12384},"seed_int":0,"generic_size":1},{"name":"colorize_3","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0,"r":0,"g":0,"b":0,"a":1},{"pos":1,"r":1,"g":1,"b":1,"a":1}],"interpolation":1}},"node_position":{"x":-3201.370361,"y":972.838745},"seed_int":0},{"name":"reroute_6","type":"reroute","parameters":{},"node_position":{"x":-2039.782593,"y":924.693237},"seed_int":0},{"name":"warp_4","type":"warp","parameters":{"mode":0,"amount":0.07,"eps":0.095},"node_position":{"x":-1847.820801,"y":942.534668},"seed_int":0}],"connections":[{"from":"graph","from_port":2,"to":"Material","to_port":5},{"from":"graph","from_port":3,"to":"invert","to_port":0},{"from":"invert","from_port":0,"to":"Material","to_port":6},{"from":"blend2_2","from_port":0,"to":"blend2","to_port":1},{"from":"gradient","from_port":0,"to":"blend2_2","to_port":0},{"from":"gradient_2","from_port":0,"to":"blend2_2","to_port":1},{"from":"graph_2","from_port":0,"to":"warp","to_port":1},{"from":"warp","from_port":0,"to":"blend2","to_port":0},{"from":"blend2","from_port":0,"to":"auto_tones","to_port":0},{"from":"auto_tones","from_port":0,"to":"tiler","to_port":0},{"from":"graph","from_port":0,"to":"reroute","to_port":0},{"from":"reroute","from_port":0,"to":"colorize_2","to_port":0},{"from":"colorize_2","from_port":0,"to":"blend2_3","to_port":0},{"from":"tones","from_port":0,"to":"colorize","to_port":0},{"from":"colorize","from_port":0,"to":"blend2_4","to_port":1},{"from":"blend2_4","from_port":0,"to":"Material","to_port":0},{"from":"quantize","from_port":0,"to":"warp_2","to_port":0},{"from":"fbm2","from_port":0,"to":"warp_2","to_port":1},{"from":"warp_2","from_port":0,"to":"blend2_3","to_port":1},{"from":"tiler","from_port":0,"to":"reroute_3","to_port":0},{"from":"reroute_3","from_port":0,"to":"reroute_4","to_port":0},{"from":"reroute_4","from_port":0,"to":"quantize","to_port":0},{"from":"reroute","from_port":0,"to":"tones","to_port":0},{"from":"reroute_3","from_port":0,"to":"blend2_5","to_port":0},{"from":"voronoi2","from_port":0,"to":"tones_2","to_port":0},{"from":"tones_2","from_port":0,"to":"blend2_5","to_port":1},{"from":"blend2_5","from_port":0,"to":"blend2_6","to_port":0},{"from":"graph_3","from_port":0,"to":"fbm2_2","to_port":0},{"from":"reroute_2","from_port":0,"to":"auto_tones_2","to_port":0},{"from":"auto_tones_2","from_port":0,"to":"graph","to_port":0},{"from":"graph_3","from_port":0,"to":"blend2_7","to_port":0},{"from":"fbm2_2","from_port":0,"to":"blend2_7","to_port":1},{"from":"blend2_7","from_port":0,"to":"blend2_6","to_port":1},{"from":"tiler","from_port":1,"to":"reroute_5","to_port":0},{"from":"blend2_3","from_port":0,"to":"blend2_8","to_port":0},{"from":"reroute_5","from_port":0,"to":"blend2_8","to_port":1},{"from":"blend2_8","from_port":0,"to":"blend2_4","to_port":0},{"from":"auto_tones_2","from_port":0,"to":"blend2_9","to_port":0},{"from":"fbm2_3","from_port":0,"to":"blend2_9","to_port":1},{"from":"blend2_9","from_port":0,"to":"normal_map2","to_port":0},{"from":"normal_map2","from_port":0,"to":"Material","to_port":4},{"from":"graph","from_port":0,"to":"tones_3","to_port":0},{"from":"tones_3","from_port":0,"to":"blend2_10","to_port":0},{"from":"warp_3","from_port":0,"to":"blend2_10","to_port":1},{"from":"graph_4","from_port":0,"to":"warp_3","to_port":0},{"from":"graph_4","from_port":0,"to":"warp_3","to_port":1},{"from":"blend2_10","from_port":0,"to":"tones_4","to_port":0},{"from":"tones_4","from_port":0,"to":"Material","to_port":2},{"from":"shape","from_port":0,"to":"transform2","to_port":0},{"from":"transform2","from_port":0,"to":"warp","to_port":0},{"from":"blend2_6","from_port":0,"to":"blend2_11","to_port":0},{"from":"tiler","from_port":1,"to":"colorize_3","to_port":0},{"from":"colorize_3","from_port":0,"to":"reroute_6","to_port":0},{"from":"reroute_6","from_port":0,"to":"transform2_2","to_port":1},{"from":"reroute_6","from_port":0,"to":"transform2_2","to_port":2},{"from":"transform2_2","from_port":0,"to":"blend2_11","to_port":1},{"from":"blend2_11","from_port":0,"to":"reroute_2","to_port":0},{"from":"scratches","from_port":0,"to":"warp_4","to_port":0},{"from":"graph_3","from_port":0,"to":"warp_4","to_port":1},{"from":"warp_4","from_port":0,"to":"transform2_2","to_port":0}]}